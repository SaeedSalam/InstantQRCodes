<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>InstantQRCodes - Generate QR Codes Instantly, for 100% Free!</title>
	<meta name="Description"
		content="Instant QR Codes hepls to generate qr codes for your website or any other url instantly and for 100% free!" />
	<link rel="stylesheet" href="assets/css/style.css" />
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-0F0NTH7B90"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-0F0NTH7B90');
	</script>
</head>

<body>
	<div class="container">
		<h1>InstantQRCodes</h1>
		<p>Generate QR Codes, Free &amp; Instant</p>
		<br />
		<input id="text" type="url" value="" style="width: 80%"
			placeholder="the link you want to show when qr code is scanned" pattern="https?://.+" required />
		<button type="button" id="qrbutton">Generate QR Code</button>
		<br />
		<div id="qrcode"></div>
		<br />
		<a id="qrdl" hidden>Download your qr code</a>
	</div>

	<script src="assets/js/qrcode.min.js"></script>
	<script>
		var qrcode = new QRCode("qrcode", {
			width: 160,
			height: 160,
			colorDark: "#000000",
			colorLight: "#ffffff",
			correctLevel: QRCode.CorrectLevel.H,
		});

		function makeCode() {
			var elText = document.getElementById("text");

			if (!elText.value) {
				alert("Input a link");
				elText.focus();
				return;
			}

			qrcode.makeCode(elText.value);
			setTimeout(() => {
				let qelem = document.querySelector("#qrcode img");
				let dlink = document.querySelector("#qrdl");
				let qr = qelem.getAttribute("src");
				dlink.setAttribute("href", qr);
				dlink.setAttribute("download", "qr-code.png");
				dlink.removeAttribute("hidden");
			}, 500);
		}

		function validURL(str) {
			var pattern = new RegExp(
				"^(https?:\\/\\/)?" + // protocol
				"((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|" + // domain name
				"((\\d{1,3}\\.){3}\\d{1,3}))" + // OR ip (v4) address
				"(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*" + // port and path
				"(\\?[;&a-z\\d%_.~+=-]*)?" + // query string
				"(\\#[-a-z\\d_]*)?$",
				"i"
			); // fragment locator
			return !!pattern.test(str);
		}

		function generateQr() {
			if (validURL(document.getElementById("text").value)) {
				makeCode();
			} else {
				alert("please use a valid url");
			}
		}

		function logKey(e) {
			if (e.keyCode == 13) {
				generateQr();
			}
		}

		document.getElementById("text").addEventListener("keydown", logKey);

		document.getElementById("qrbutton").addEventListener("click", generateQr);
	</script>

	<body>

</html>