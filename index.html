<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>InstantQRCodes - Generate QR Codes Instantly, for 100% Free!</title>
	<meta name="Description"
		content="Instant QR Codes hepls to generate qr codes for your website or any other url instantly and for 100% free!" />
	<style>
		html {
			line-height: 1.15;
			/* 1 */
			-webkit-text-size-adjust: 100%;
			/* 2 */
		}

		body {
			margin: 0;
		}

		main {
			display: block;
		}

		h1 {
			font-size: 2em;
			margin: 0.67em 0;
		}

		a {
			background-color: transparent;
		}

		b,
		strong {
			font-weight: bolder;
		}

		sub,
		sup {
			font-size: 75%;
			line-height: 0;
			position: relative;
			vertical-align: baseline;
		}

		sub {
			bottom: -0.25em;
		}

		sup {
			top: -0.5em;
		}

		img {
			border-style: none;
		}

		button,
		input,
		optgroup,
		select,
		textarea {
			font-family: inherit;
			font-size: 100%;
			line-height: 1.15;
			margin: 0;
		}

		button,
		input {
			overflow: visible;
		}

		button,
		select {
			text-transform: none;
		}

		button,
		[type="button"],
		[type="reset"],
		[type="submit"] {
			-webkit-appearance: button;
		}

		textarea {
			overflow: auto;
		}

		[hidden] {
			display: none;
		}

		.container {
			padding: 20px;
			text-align: center;
		}

		#qrcode {
			width: 160px;
			height: 160px;
			margin: 15px auto 0;
		}

		#text,
		#qrbutton {
			margin-top: 10px;
		}
	</style>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-0F0NTH7B90"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-0F0NTH7B90');
	</script>
</head>

<body>
	<div class="container">
		<h1>InstantQRCodes</h1>
		<p>Generate QR Codes, Free &amp; Instant</p>
		<br />
		<input id="text" type="url" value="" style="width: 80%"
			placeholder="the link you want to show when qr code is scanned" pattern="https?://.+" required />
		<button type="button" id="qrbutton">Generate QR Code</button>
		<br />
		<div id="qrcode"></div>
		<br />
		<a id="qrdl" hidden>Download your qr code</a>
	</div>

	<script src="qrcode.js"></script>
	<script>
		document.addEventListener("DOMContentLoaded", function (event) {

			var qrcode = new QRCode("qrcode", {
				width: 160,
				height: 160,
				colorDark: "#000000",
				colorLight: "#ffffff",
				correctLevel: QRCode.CorrectLevel.H,
			});

			function makeCode() {
				var elText = document.getElementById("text");

				if (!elText.value) {
					alert("Input a link");
					elText.focus();
					return;
				}

				qrcode.makeCode(elText.value);
				setTimeout(() => {
					const qelem = document.getElementById("qrcode").getElementsByTagName('img')[0];
					const dlink = document.getElementById("qrdl");
					
					const qr = qelem.getAttribute("src");
					dlink.setAttribute("href", qr);
					dlink.removeAttribute("hidden");
					dlink.setAttribute("download", "qr-code.png");
				}, 500);
			}

			function validURL(str) {
				var pattern = new RegExp(
					"^(https?:\\/\\/)?" + // protocol
					"((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|" + // domain name
					"((\\d{1,3}\\.){3}\\d{1,3}))" + // OR ip (v4) address
					"(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*" + // port and path
					"(\\?[;&a-z\\d%_.~+=-]*)?" + // query string
					"(\\#[-a-z\\d_]*)?$",
					"i"
				); // fragment locator
				return !!pattern.test(str);
			}

			function generateQr() {
				if (validURL(document.getElementById("text").value)) {
					makeCode();
				} else {
					alert("please use a valid url");
				}
			}

			function logKey(e) {
				if (e.keyCode == 13) {
					generateQr();
				}
			}

			document.getElementById("text").addEventListener("keydown", logKey);

			document.getElementById("qrbutton").addEventListener("click", generateQr);
		})
	</script>

	<body>

</html>